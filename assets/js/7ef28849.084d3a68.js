"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[466],{4918:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"scripts/generate-stats-fromtemplate-withgraphs","title":"generate_stats_fromtemplate_withgraphs.py","description":"The ultimate analytics script combining template-based generation with visual charts.","source":"@site/docs/scripts/generate-stats-fromtemplate-withgraphs.md","sourceDirName":"scripts","slug":"/scripts/generate-stats-fromtemplate-withgraphs","permalink":"/docs/scripts/generate-stats-fromtemplate-withgraphs","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/analrepo/tree/main/docs/docs/scripts/generate-stats-fromtemplate-withgraphs.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"generate_stats_fromtemplate_withgraphs.py"},"sidebar":"docsSidebar","previous":{"title":"generate_stats_fromtemplate.py","permalink":"/docs/scripts/generate-stats-fromtemplate"},"next":{"title":"Configuration Overview","permalink":"/docs/configuration"}}');var s=t(4848),i=t(8453);const r={sidebar_position:6,title:"generate_stats_fromtemplate_withgraphs.py"},o="generate_stats_fromtemplate_withgraphs.py",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"README_TEMPLATE.md",id:"readme_templatemd",level:3}];function m(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"generate_stats_fromtemplate_withgraphspy",children:"generate_stats_fromtemplate_withgraphs.py"})}),"\n",(0,s.jsx)(e.p,{children:"The ultimate analytics script combining template-based generation with visual charts."}),"\n",(0,s.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(e.p,{children:"This script combines the best features of all previous scripts:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Template-based generation (clean output)"}),"\n",(0,s.jsx)(e.li,{children:"Visual charts (matplotlib/pandas)"}),"\n",(0,s.jsx)(e.li,{children:"Multiple analytics blocks"}),"\n",(0,s.jsx)(e.li,{children:"Comprehensive configuration"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Template Mode"}),": Reads from README_TEMPLATE.md"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visual Charts"}),": Pie charts and line graphs"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"All Blocks"}),": OVERVIEW, LANGUAGE, COMMITS, PULSE"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Clean Output"}),": No markers or config in final README"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Chart Export"}),": Saves PNG files to stats/"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Full Configuration"}),": Control all aspects via JSON"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"pip install matplotlib pandas\n"})}),"\n",(0,s.jsx)(e.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"python generate_stats_fromtemplate_withgraphs.py\n"})}),"\n",(0,s.jsx)(e.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsx)(e.h3,{id:"readme_templatemd",children:"README_TEMPLATE.md"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-markdown",children:'# Awesome Project\n\n![Banner](banner.png)\n\n<details>\n<summary>\ud83d\udcc8 Analytics Config</summary>\n\n```json\n{\n  "timeframes": {\n    "All Time": null,\n    "Last Quarter": 90,\n    "Last Month": 30,\n    "Last Week": 7\n  },\n  "languages": {\n    "ignore": ["lock", "json", "min"]\n  },\n  "sections": {\n    "include": ["OVERVIEW", "LANGUAGE", "COMMITS", "PULSE"]\n  }\n}\n```\n\n</details>\n\n## Project Stats\n\n\x3c!-- STATS BREAKDOWN START:PULSE --\x3e\n\x3c!-- STATS BREAKDOWN END:PULSE --\x3e\n\n## Detailed Analytics\n\n\x3c!-- STATS BREAKDOWN START:OVERVIEW --\x3e\n\x3c!-- STATS BREAKDOWN END:OVERVIEW --\x3e\n\n## Language Distribution\n\n\x3c!-- STATS BREAKDOWN START:LANGUAGE --\x3e\n\x3c!-- STATS BREAKDOWN END:LANGUAGE --\x3e\n\n## Commit Trends\n\n\x3c!-- STATS BREAKDOWN START:COMMITS --\x3e\n\x3c!-- STATS BREAKDOWN END:COMMITS --\x3e\n\n## Features\n\n- Feature 1\n- Feature 2\n````markdown\n\n### Generated README.md\n\n```markdown\n# Awesome Project\n\n![Banner](banner.png)\n\n## Project Stats\n\n## \u26a1 Repository Pulse\n\n- **Total Commits:** 347\n- **Contributors:** 12\n- **Lines Added:** 145,234\n- **Lines Deleted:** 67,890\n- **First Commit Date:** 2023-01-15\n- **Last Commit Date:** 2024-11-09\n\n## Detailed Analytics\n\n## \ud83d\udcca Repository Analytics Overview\n\n### All Time\n\n| Contributor | Commits | +Add | -Del | Total | Top Languages |\n|-------------|----------|------|------|--------|----------------|\n| Alice | 120 | 15,234 | 5,678 | 20,912 | Python (12000), JavaScript (4500) |\n| Bob | 85 | 8,900 | 3,200 | 12,100 | JavaScript (7000), CSS (2100) |\n\n### Last Quarter\n\n...\n\n## Language Distribution\n\n## \ud83e\udde0 Language Breakdown\n\n### All Time\n![All Time Language Breakdown](stats/lang_all_time.png)\n\n### Last Quarter\n![Last Quarter Language Breakdown](stats/lang_last_quarter.png)\n\n## Commit Trends\n\n## \ud83d\udcc8 Commit Activity Trends\n\n### All Time\n![All Time Commit Activity](stats/activity_all_time.png)\n\n### Last Quarter\n![Last Quarter Commit Activity](stats/activity_last_quarter.png)\n\n## Features\n\n- Feature 1\n- Feature 2\n```\n\n**Note**: All markers and config removed, charts embedded!\n\n## Generated Files\n\n```\nyour-repo/\n\u251c\u2500\u2500 README_TEMPLATE.md (source)\n\u251c\u2500\u2500 README.md (generated)\n\u251c\u2500\u2500 generate_stats_fromtemplate_withgraphs.py\n\u2514\u2500\u2500 stats/\n    \u251c\u2500\u2500 lang_all_time.png\n    \u251c\u2500\u2500 lang_last_quarter.png\n    \u251c\u2500\u2500 lang_last_month.png\n    \u251c\u2500\u2500 lang_last_week.png\n    \u251c\u2500\u2500 activity_all_time.png\n    \u251c\u2500\u2500 activity_last_quarter.png\n    \u251c\u2500\u2500 activity_last_month.png\n    \u2514\u2500\u2500 activity_last_week.png\n```\n\n## Configuration\n\n### Timeframes\n\n```json\n"timeframes": {\n  "All Time": null,\n  "Last Quarter": 90,\n  "Last Month": 30,\n  "Last Week": 7,\n  "Last 24h": 1\n}\n```\n\n**Format**: Days as integers or null for all time\n\n### Languages\n\n```json\n"languages": {\n  "ignore": ["lock", "json", "min", "map"]\n}\n```\n\n**Effect**: Excludes matching extensions from analysis\n\n### Sections\n\n```json\n"sections": {\n  "include": ["OVERVIEW", "LANGUAGE", "COMMITS", "PULSE"]\n}\n```\n\n**Options**:\n- `OVERVIEW`: Contributor tables\n- `LANGUAGE`: Language pie charts\n- `COMMITS`: Activity line charts\n- `PULSE`: Quick metrics\n\n## Block Generators\n\n### OVERVIEW\n\n```python\ndef generate_overview_block(timeframes, ignored_exts):\n    # Per-contributor stats for each timeframe\n    # Commits, additions, deletions, top languages\n    return markdown_tables\n```\n\n### LANGUAGE\n\n```python\ndef generate_language_block(timeframes, ignored_exts):\n    # Language aggregation\n    # Pie chart generation\n    # Image embedding\n    return markdown_with_images\n```\n\n### COMMITS\n\n```python\ndef generate_commit_activity_block(timeframes):\n    # Daily commit counts\n    # Time series charts\n    # Trend visualization\n    return markdown_with_charts\n```\n\n### PULSE\n\n```python\ndef generate_pulse_block():\n    # Total commits, contributors\n    # Lines added/deleted\n    # First/last commit dates\n    return markdown_stats\n```\n\n## Chart Specifications\n\n### Language Pie Charts\n\n- **Size**: 5x5 inches\n- **DPI**: 150\n- **Format**: PNG\n- **Features**: Percentages, legends, color-coded\n\n### Commit Activity Charts\n\n- **Size**: 6x3 inches\n- **DPI**: 150\n- **Format**: PNG\n- **Features**: Daily frequency, grid lines, smooth curves\n\n## Advanced Configuration\n\n### Full Config Example\n\n```json\n{\n  "timeframes": {\n    "All Time": null,\n    "Last Year": 365,\n    "Last Quarter": 90,\n    "Last Month": 30,\n    "Last Week": 7,\n    "Yesterday": 1\n  },\n  "languages": {\n    "ignore": ["lock", "json", "svg", "min", "map", "bundle"]\n  },\n  "sections": {\n    "include": ["PULSE", "OVERVIEW", "LANGUAGE", "COMMITS"]\n  }\n}\n```\n\n### Minimal Config\n\n```json\n{\n  "timeframes": {\n    "All Time": null,\n    "Last Month": 30\n  },\n  "sections": {\n    "include": ["OVERVIEW"]\n  }\n}\n```\n\n## Workflow Integration\n\n### Daily Updates\n\n```bash\n#!/bin/bash\ncd /path/to/repo\npython generate_stats_fromtemplate_withgraphs.py\ngit add README.md stats/\ngit commit -m "Update analytics [skip ci]"\ngit push\n```\n\n### GitHub Actions\n\n```yaml\nname: Update Analytics\n\non:\n  schedule:\n    - cron: "0 0 * * *"  # Daily\n  workflow_dispatch:\n\njobs:\n  update-readme:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Setup Python\n        uses: actions/setup-python@v5\n        with:\n          python-version: "3.x"\n      - name: Install dependencies\n        run: pip install matplotlib pandas\n      - name: Generate analytics\n        run: python generate_stats_fromtemplate_withgraphs.py\n      - name: Commit changes\n        run: |\n          git config user.name "github-actions[bot]"\n          git config user.email "actions@github.com"\n          git add README.md stats/\n          git diff --quiet || git commit -m "Update analytics"\n          git push\n```\n\n## Performance\n\n**Typical Execution Times**:\n- Small repo (&lt;1K commits): 5-10 seconds\n- Medium repo (1K\u201310K commits): 10-30 seconds\n- Large repo (&gt;10K commits): 30-60 seconds\n\n**Bottlenecks**:\n- Git operations: 40%\n- Chart generation: 40%\n- Data processing: 20%\n\n## Troubleshooting\n\n### Charts Not Generating\n\n**Check**:\n1. matplotlib and pandas installed\n2. Write permissions for stats/ directory\n3. No font errors in matplotlib\n\n### Large File Sizes\n\n**Solution**: Reduce DPI or figure sizes:\n```python\nplt.savefig(chart_path, dpi=100)  # Lower DPI\nplt.subplots(figsize=(4, 4))      # Smaller size\n```\n\n### Memory Issues\n\n**Solution**: Process timeframes individually or reduce data points\n\n## Best Practices\n\n1. **Commit Both Files**: Template and generated README\n2. **Version Control Charts**: Include stats/ in repo\n3. **Ignore Temp Files**: Add .gitignore for temporary data\n4. **Test Locally**: Verify before automating\n5. **Document Setup**: Note dependencies in README\n\n## Comparison\n\n| Feature | Basic Scripts | Template Scripts | This Script |\n|---------|---------------|------------------|-------------|\n| Template Mode | \u274c | \u2705 | \u2705 |\n| Visual Charts | \u274c/\u2705 | \u274c | \u2705 |\n| All Blocks | \u274c | \u274c | \u2705 |\n| Clean Output | \u274c | \u2705 | \u2705 |\n| Dependencies | None/Some | None | Required |\n\n## See Also\n\n- [Examples](/docs/examples): Real-world usage\n- [GitHub Actions](/docs/advanced/github-actions): Automation setup\n- [Configuration Guide](/docs/configuration): Full config reference\n'})})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(m,{...n})}):m(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>o});var a=t(6540);const s={},i=a.createContext(s);function r(n){const e=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),a.createElement(i.Provider,{value:e},n.children)}}}]);