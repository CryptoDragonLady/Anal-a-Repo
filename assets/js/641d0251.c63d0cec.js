"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[642],{5111:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"scripts/generate-stats2","title":"generate_stats2.py","description":"Enhanced repository analytics with pandas and matplotlib for visual charts and comprehensive data analysis.","source":"@site/docs/scripts/generate-stats2.md","sourceDirName":"scripts","slug":"/scripts/generate-stats2","permalink":"/Anal-a-Repo/docs/scripts/generate-stats2","draft":false,"unlisted":false,"editUrl":"https://github.com/CryptoDragonLady/Anal-a-Repo/tree/main/docs/docs/scripts/generate-stats2.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"generate_stats2.py"},"sidebar":"docsSidebar","previous":{"title":"generate_stats.py","permalink":"/Anal-a-Repo/docs/scripts/generate-stats"},"next":{"title":"generate_stats3.py","permalink":"/Anal-a-Repo/docs/scripts/generate-stats3"}}');var a=t(4848),i=t(8453);const r={sidebar_position:2,title:"generate_stats2.py"},o="generate_stats2.py",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Execution",id:"basic-execution",level:3},{value:"Output",id:"output",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Timeframes",id:"timeframes",level:3},{value:"Blocks",id:"blocks",level:3},{value:"Generated Blocks",id:"generated-blocks",level:2},{value:"OVERVIEW Block",id:"overview-block",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"generate_stats2py",children:"generate_stats2.py"})}),"\n",(0,a.jsx)(e.p,{children:"Enhanced repository analytics with pandas and matplotlib for visual charts and comprehensive data analysis."}),"\n",(0,a.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"generate_stats2.py"})," takes repository analytics to the next level by generating visual charts (pie charts and line graphs) and providing detailed contributor analytics. This script requires external dependencies but produces professional-quality visualizations."]}),"\n",(0,a.jsx)(e.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Visual Charts"}),": Pie charts for language breakdown, line charts for commit activity"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"PNG Output"}),": Saves charts to ",(0,a.jsx)(e.code,{children:"stats/"})," directory"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Pandas Integration"}),": Advanced data processing and time-series analysis"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Matplotlib Graphs"}),": Professional, publication-quality charts"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Contributor Analytics"}),": Detailed per-contributor breakdowns"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Multiple Blocks"}),": OVERVIEW, LANGUAGE, COMMITS, PULSE sections"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Automatic Chart Embedding"}),": Embeds chart images in README"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(e.p,{children:"###Dependencies"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"pip install matplotlib pandas\n"})}),"\n",(0,a.jsx)(e.p,{children:"Or use requirements.txt:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-txt",children:"matplotlib>=3.3.0\npandas>=1.1.0\n"})}),"\n",(0,a.jsx)(e.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(e.h3,{id:"basic-execution",children:"Basic Execution"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"python generate_stats2.py\n"})}),"\n",(0,a.jsx)(e.h3,{id:"output",children:"Output"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"README.md"}),": Updated with analytics and chart links"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"stats/"}),": Directory with generated PNG charts","\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.code,{children:"lang_all_time.png"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.code,{children:"lang_last_30_days.png"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.code,{children:"activity_all_time.png"})}),"\n",(0,a.jsx)(e.li,{children:"etc."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(e.h3,{id:"timeframes",children:"Timeframes"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'TIMEFRAMES = {\n    "All Time": None,\n    "Last 30 Days": 30,\n    "Last 7 Days": 7,\n    "Last 24h": 1,\n}\n'})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Format"}),": Dictionary where values are days (int) or None for all time."]}),"\n",(0,a.jsx)(e.h3,{id:"blocks",children:"Blocks"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'BLOCKS = ["OVERVIEW", "LANGUAGE", "COMMITS", "PULSE"]\n'})}),"\n",(0,a.jsx)(e.p,{children:"Add markers for the blocks you want in your README."}),"\n",(0,a.jsx)(e.h2,{id:"generated-blocks",children:"Generated Blocks"}),"\n",(0,a.jsx)(e.h3,{id:"overview-block",children:"OVERVIEW Block"}),"\n",(0,a.jsx)(e.p,{children:"Generates contributor tables for each timeframe:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-markdown",children:'## \ud83d\udcca Repository Analytics Overview\n\n### All Time\n\n| Contributor | Commits | +Add | -Del | Total | Top Languages |\n|-------------|----------|------|------|--------|----------------|\n| Alice | 120 | 15,234 | 5,678 | 20,912 | Python (12000), JavaScript (4500) |\n| Bob | 85 | 8,900 | 3,200 | 12,100 | JavaScript (7000), CSS (2100) |\n```\n\n### LANGUAGE Block\n\nCreates pie charts and embeds them:\n\n````markdown\n## \ud83e\udde0 Language Breakdown\n\n### All Time\n![All Time Language Breakdown](stats/lang_all_time.png)\n\n### Last 30 Days\n![Last 30 Days Language Breakdown](stats/lang_last_30_days.png)\n```\n\n**Chart Features**:\n- Pie chart with percentages\n- Color-coded segments\n- Legend with language names\n- 150 DPI resolution\n\n### COMMITS Block\n\nGenerates commit activity line charts:\n\n````markdown\n## \ud83d\udcc8 Commit Activity Trends\n\n### All Time\n![All Time Commit Activity](stats/activity_all_time.png)\n\n### Last 30 Days\n![Last 30 Days Commit Activity](stats/activity_last_30_days.png)\n```\n\n**Chart Features**:\n- Daily commit counts\n- Time series with date axis\n- Grid lines for readability\n- Smooth interpolation\n\n### PULSE Block\n\nQuick repository metrics:\n\n```markdown\n## \u26a1 Repository Pulse\n\n- **Total Commits:** 347\n- **Contributors:** 12\n- **Lines Added:** 145,234\n- **Lines Deleted:** 67,890\n- **First Commit Date:** 2023-01-15\n- **Last Commit Date:** 2024-11-09\n```\n\n## Functions\n\n### `git_log(since_days=None)`\n\nRetrieves git log with numstat data.\n\n**Parameters**:\n- `since_days` (int, optional): Limit to last N days\n\n**Returns**: List of tuples `(author, date, additions, deletions, filename)`\n\n### `detect_language(filename)`\n\nMaps file extensions to language names.\n\n**Mapping**:\n```python\n{\n    ".py": "Python",\n    ".js": "JavaScript", \n    ".ts": "TypeScript",\n    ".md": "Markdown",\n    ".html": "HTML",\n    ".css": "CSS",\n    ".yml": "YAML",\n    ".json": "JSON"\n}\n```\n\n### `plot_language_chart(langs, label)`\n\nCreates pie chart for language distribution.\n\n**Parameters**:\n- `langs` (dict): Language counts `{"Python": 8500, "JavaScript": 4200}`\n- `label` (str): Chart title suffix\n\n**Returns**: Path object to saved chart\n\n**Chart Specs**:\n- Figure size: 5x5 inches\n- DPI: 150\n- Format: PNG\n- Autopct: Percentages to 1 decimal\n\n### `plot_commit_activity(dates, label)`\n\nCreates line chart for commit activity over time.\n\n**Parameters**:\n- `dates` (list): List of commit dates (strings)\n- `label` (str): Chart title suffix\n\n**Returns**: Path object to saved chart\n\n**Chart Specs**:\n- Figure size: 6x3 inches\n- DPI: 150\n- Daily frequency\n- Grid: Dashed, 40% alpha\n\n## Block Generators\n\n### `generate_overview_block()`\n\nCreates comprehensive contributor table with:\n- Commit counts per contributor\n- Additions and deletions\n- Total lines changed\n- Top languages per contributor\n\n### `generate_language_block()`\n\nGenerates:\n- Aggregate language statistics\n- Pie chart per timeframe\n- Markdown with embedded images\n\n### `generate_commit_activity_block()`\n\nProduces:\n- Daily commit counts\n- Line chart visualization\n- Trend analysis\n\n### `generate_pulse_block()`\n\nCalculates:\n- Total commits (all time)\n- Unique contributors\n- Total lines added/deleted\n- First and last commit dates\n\n## Example README Setup\n\n```markdown\n# Project Name\n\n\x3c!-- STATS BREAKDOWN START:PULSE --\x3e\n\x3c!-- STATS BREAKDOWN END:PULSE --\x3e\n\n## Analytics\n\n\x3c!-- STATS BREAKDOWN START:OVERVIEW --\x3e\n\x3c!-- STATS BREAKDOWN END:OVERVIEW --\x3e\n\n\x3c!-- STATS BREAKDOWN START:LANGUAGE --\x3e\n\x3c!-- STATS BREAKDOWN END:LANGUAGE --\x3e\n\n\x3c!-- STATS BREAKDOWN START:COMMITS --\x3e\n\x3c!-- STATS BREAKDOWN END:COMMITS --\x3e\n```\n\n## Advanced Usage\n\n### Customizing Charts\n\nEdit the plotting functions:\n\n```python\ndef plot_language_chart(langs, label):\n    fig, ax = plt.subplots(figsize=(7, 7))  # Larger chart\n    colors = [\'#ff9999\', \'#66b3ff\', \'#99ff99\']  # Custom colors\n    ax.pie(sizes, labels=names, autopct="%1.1f%%", \n           startangle=140, colors=colors)\n    plt.savefig(chart_path, dpi=200)  # Higher resolution\n```\n\n### Adding Timeframes\n\n```python\nTIMEFRAMES = {\n    "All Time": None,\n    "Last Quarter": 90,\n    "Last Month": 30,\n    "Last Week": 7,\n    "Yesterday": 1,\n}\n```\n\n### Filtering Contributors\n\nModify `generate_overview_block()`:\n\n```python\n# Only show contributors with 10+ commits\nfor author, stats in sorted(contributors.items(), ...):\n    if stats[\'commits\'] >= 10:\n        output += f"| {author} | ..."\n```\n\n## File Structure\n\n```\nyour-repo/\n\u251c\u2500\u2500 README.md (updated)\n\u251c\u2500\u2500 generate_stats2.py\n\u2514\u2500\u2500 stats/\n    \u251c\u2500\u2500 lang_all_time.png\n    \u251c\u2500\u2500 lang_last_30_days.png\n    \u251c\u2500\u2500 lang_last_7_days.png\n    \u251c\u2500\u2500 lang_last_24h.png\n    \u251c\u2500\u2500 activity_all_time.png\n    \u251c\u2500\u2500 activity_last_30_days.png\n    \u251c\u2500\u2500 activity_last_7_days.png\n    \u2514\u2500\u2500 activity_last_24h.png\n```\n\n## Troubleshooting\n\n### Charts Not Generating\n\n**Check**:\n1. matplotlib and pandas installed\n2. `stats/` directory exists (script creates it)\n3. No permission errors\n\n### Low Quality Charts\n\n**Solution**: Increase DPI in plotting functions:\n```python\nplt.savefig(chart_path, dpi=300)  # Higher quality\n```\n\n### Memory Issues\n\n**Solution**: Reduce figure size or process fewer timeframes:\n```python\nplt.subplots(figsize=(4, 4))  # Smaller figures\n```\n\n### Missing Contributors\n\n**Cause**: `--no-merges` flag in git log\n**Solution**: To include merge commits, remove the flag from `git_log()`\n\n## Performance\n\n**Typical Performance**:\n- Small repo (&lt;1000 commits): &lt;5 seconds\n- Medium repo (1000\u201310000 commits): 5\u201315 seconds\n- Large repo (&gt;10000 commits): 15\u201360 seconds\n\n**Optimization Tips**:\n1. Reduce number of timeframes\n2. Use `--since` to limit history\n3. Cache git log results\n\n## Limitations\n\n- **Marker Dependency**: Requires markers in README\n- **Fixed Timeframes**: Hardcoded, not configurable from README\n- **Language Detection**: By extension only, no content analysis\n- **No Template Support**: Directly modifies README.md\n\n## Comparison\n\n| Feature | stats.py | stats2.py |\n|---------|----------|-----------|\n| Dependencies | None | matplotlib, pandas |\n| Visual Charts | Text-based | PNG images |\n| Contributor Detail | Basic | Comprehensive |\n| Chart Types | None | Pie, Line |\n| Performance | Fast | Moderate |\n\n## See Also\n\n- [generate_stats.py](/docs/scripts/generate-stats): Basic version\n- [generate_stats_fromtemplate_withgraphs.py](/docs/scripts/generate-stats-fromtemplate-withgraphs): Template + graphs\n- [Configuration Guide](/docs/configuration)\n'})})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>o});var s=t(6540);const a={},i=s.createContext(a);function r(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);